# 直播



## 直播压缩编码类型

 H.264

AAC

1. H.264：H.264是目前最常用的视频压缩编码格式，它具有高压缩比和良好的视频质量，适用于实时直播和点播。
2. H.265：H.265是H.264的升级版本，也被称为HEVC（High Efficiency Video Coding），它在相同视频质量下可以实现更高的压缩比，但相应地需要更高的计算资源。
3. VP9：VP9是由Google开发的开源视频编码格式，它提供了与H.265相媲美的压缩性能，但更加适用于WebRTC和WebM等Web应用。
4. AV1：AV1是由Alliance for Open Media开发的开源视频编码格式，它具有更高的压缩性能和更低的比特率，但需要更高的计算资源。



## 视频格式与兼容

| 格式\|浏览器 | Chrome | Safari |
| ------------ | ------ | ------ |
| Mp4          | ✅      | ✅      |
| webm         | ✅      |        |
| hls          |        | ✅      |
| flv          |        |        |



## 直播协议

1. HLS 协议
2. RTMP 协议
3. HTTP-FLV 协议

### HLS协议

HTTP Live Streaming

HLS协议的工作原理如下：

1. 服务器将整个视频文件切割成多个小的.ts文件，每个文件通常持续几秒钟。
2. 服务器生成一个.m3u8文件，该文件是一个索引文件，包含了所有.ts文件的地址以及其他相关信息。
3. 客户端请求.m3u8文件，服务器返回该文件。
4. 客户端根据.m3u8文件中的地址信息，依次请求.ts文件进行播放。
5. 客户端根据.ts文件的时间戳和持续时间，按照顺序进行播放，实现流媒体的连续播放。

[HTTP Live Streaming (HLS) - 概念 - 简书 (jianshu.com)](https://www.jianshu.com/p/2ce402a485ca)

### RTMP 协议



### HTTP-FLV 协议

flv.js iPhone ios 不支持；

[Media Source Extensions](https://link.segmentfault.com/?enc=Jr7aBV17m%2FAufpwhILNybA%3D%3D.BoeoQry2xL%2FZsS52wUBNij7Aun1RvQWMKAqIzFxEFHIoaOWH9it7q%2B9hl5uUIU0JhlcYRIpedHQSsTOn2SbNx3765agjt6yLxFTNuHTMIo4%3D)是一种标准,定义了我们可以通过JavaScript创建媒体流，并使用`<audio>`和<`video>`元素进行播放。



## 直播库

1. flvjs
2. videojs
3. hlsjs

### flv

[javascript - flv.js源码知识点（上） - yangyiliang - SegmentFault 思否](https://segmentfault.com/a/1190000024444683)